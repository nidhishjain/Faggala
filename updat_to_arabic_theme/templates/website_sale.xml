<odoo>
    <template id="updated_comparison" inherit_id="website_sale_comparison.product_compare">
        <xpath expr="//table[@id='o_comparelist_table']" position="replace">
            <table class="table table-bordered table-hover text-center mt16 table-comparator" id="o_comparelist_table">
                <t t-set="categories" t-value="products._prepare_categories_for_display()"/>
                <thead>
                    <tr>
                        <td t-if="len(categories)" class="o_ws_compare_image td-top-left border-bottom-0"/>
                        <td t-foreach="products" t-as="product"
                            class="o_ws_compare_image position-relative border-bottom-0">
                            <a href="#" t-att-data-product_product_id="product.id" class="o_comparelist_remove"
                               t-if="len(products) &gt; 2">
                                <strong>x</strong>
                            </a>
                            <a t-att-href="product.website_url">
                                <img t-attf-src="/web/image/product.product/#{product.id}/image_256"
                                     class="img img-fluid" style="margin:auto;" alt="صورة المنتج"/>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td t-if="len(categories)" class="td-top-left border-top-0"/>
                        <td t-foreach="products" t-as="product" class="border-top-0">
                            <t t-set="combination_info" t-value="product._get_combination_info_variant()"/>
                            <div class="product_summary">
                                <a class="o_product_comparison_table" t-att-href="product.website_url">
                                    <span t-esc="combination_info['display_name']"/>
                                    <br/>
                                </a>
                                <span>
                                    <strong>السعر:</strong>
                                    <del t-attf-class="text-danger mr8 {{'' if combination_info['has_discounted_price'] else 'd-none'}}"
                                         style="white-space: nowrap;" t-esc="combination_info['list_price']"
                                         t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                    <span t-esc="combination_info['price']"
                                          t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                </span>
                                <span>
                                    <strong class="">الماركة :</strong>
                                    <span t-esc="product.product_brand_ept_id.name"/>
                                </span>
                                <span>
                                    <strong>الوحدات المتاحة :</strong>
                                    <span t-esc="product.virtual_available" t-attf-class="text-danger"/>
                                </span>
                                <span>
                                    <strong>نسبة التخغيض :</strong>
                                    <strong>%</strong>
                                    <span t-attf-class="text-danger mr8 {{'' if combination_info['has_discounted_price'] == false else 'd-none'}}">
                                        0
                                    </span>
                                    <span t-attf-class="text-danger mr8 {{'' if combination_info['has_discounted_price'] else 'd-none'}}"
                                          t-esc="'%.2f'%(100-(combination_info['price']/combination_info['list_price'])*100)"/>
                                </span>
                                <form action="/shop/cart/update" method="post" class="text-center">
                                    <input name="product_id" t-att-value="product.id" type="hidden"/>
                                    <a role="button" class="btn btn-primary btn-block a-submit" href="#">
                                        <i class="fa fa-shopping-cart"/>
                                        أضف إلى عربة التسوق
                                    </a>
                                </form>
                            </div>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="categories" t-as="category">
                        <t t-if="len(categories) &gt; 1">
                            <tr class="clickable" data-toggle="collapse"
                                t-att-data-target="'.o_ws_category_%d' % category.id">
                                <th class="text-left" t-att-colspan="len(products) + 1">
                                    <i class="fa fa-chevron-circle-down o_product_comparison_collpase" role="img"
                                       aria-label="طوي" title="طوي"/>
                                    <span t-if="category" t-field="category.name"/>
                                    <span t-else="">غير مصنف</span>
                                </th>
                            </tr>
                        </t>
                        <tr t-foreach="categories[category]" t-as="attribute"
                            t-att-class="'collapse show o_ws_category_%d' % category.id">
                            <td>
                                <span t-field="attribute.name"/>
                            </td>
                            <td t-foreach="categories[category][attribute]" t-as="product">
                                <t t-foreach="categories[category][attribute][product]" t-as="ptav">
                                    <span t-field="ptav.name"/>
                                    <t t-if="not ptav_last">,</t>
                                </t>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </xpath>
    </template>


    <template id="updated_payment_table" inherit_id="website_sale.cart_summary">
        <xpath expr="//table[@id='cart_products']" position="replace">
            <table class="table table-striped table-sm" id="cart_products"
                   t-if="website_sale_order and website_sale_order.website_order_line">
                <thead>
                    <tr>
                        <th class="border-top-0 td-img">Product</th>
                        <th class="border-top-0"/>
                        <th class="border-top-0 td-qty">Qty</th>
                        <th class="border-top-0 text-center td-price">Price</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="website_sale_order.website_order_line" t-as="line">
                        <td class="" colspan="2" t-if="not line.product_id.product_tmpl_id"/>
                        <td class="td-img text-center" t-if="line.product_id.product_tmpl_id">
                            <span t-field="line.product_id.image_128"
                                  t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}"/>
                        </td>
                        <td class="td-product_name" t-if="line.product_id.product_tmpl_id">
                            <div>
                                <strong t-field="line.name_short"/>
                            </div>
                        </td>
                        <td class="td-qty">
                            <div t-esc="line.product_uom_qty"/>
                        </td>
                        <td class="text-center td-price">
                            <t t-set="combination_info"
                               t-value="line.product_id._get_combination_info_variant()"/>

                            <del t-attf-class="text-danger mr8 {{'' if combination_info['has_discounted_price'] else 'd-none'}}"
                                 style="white-space: nowrap;" t-esc="combination_info['list_price']"
                                 t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                            <span t-esc="combination_info['price']"
                                  t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        </td>
                    </tr>
                </tbody>
            </table>
        </xpath>
    </template>


    <template id="rating_widget_stars_static_header" name="Rating: button static star widget"
              inherit_id="website_sale.product">
        <xpath expr="//div[@id='product_details']/h1" position="after">
            <!--<t t-set="rating_avg" t-value="round(rating_avg * 100) / 100 / 2"/>-->
            <!--<t t-set="val_decimal" t-value="round(rating_avg % 1, 1)"/>-->
            <!--<t t-set="val_integer" t-value="int(rating_avg)"/>-->
            <!--<t t-set="empty_star" t-value="5 - (val_integer+1) if val_decimal else 5 - val_integer"/>-->
            <!--<div class="o_website_rating_static" t-att-style="inline_mode and 'display:inline'"-->
            <!--t-att-title="rating_avg">-->
            <!--<t t-foreach="range(0, val_integer)" t-as="num">-->
            <!--<i class="fa fa-star" role="img"></i>-->
            <!--</t>-->
            <!--<t t-if="val_decimal">-->
            <!--<i class="fa fa-star-half-o" role="img"></i>-->
            <!--</t>-->
            <!--<t t-foreach="range(0, empty_star)" t-as="num">-->
            <!--<i class="fa fa-star text-black-25" role="img"></i>-->
            <!--</t>-->
            <!--(<t t-esc="rating_count"/>)-->
            <!--</div>-->
            <div class="header_rating" >
                <a href="#add_to_cart">
                <t t-call="portal.message_thread">
                    <t t-set="object" t-value="product"/>
                    <t t-set="display_rating" t-value="True"/>
                </t>
                </a>
            </div>
        </xpath>
    </template>


</odoo>